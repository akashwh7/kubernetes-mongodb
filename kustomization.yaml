# Run this in kustomization.yaml directory: kustomize build . | kubectl apply -f -
# mongodb-secrets.yaml file for reference.
# Comment out mongodb-pv.yaml if dynamic storage provisioner is in place. 
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: mongodb
resources:
- mongodb-namespace.yaml
- mongodb-statefulset.yaml
- mongodb-pv.yaml
- mongodb-pvc.yaml
- mongodb-clusterip-svc.yaml
- mongodb-client.yaml

secretGenerator:
- name: mongo-creds
  literals:
  - username=YWRtaW51c2Vy
  - password=cGFzc3dvcmQxMjM=

images: # patch mongo image name with new image name
- name: mongo
  newName: my.docker.registry.com/my-project/my-app
  newTag: test  